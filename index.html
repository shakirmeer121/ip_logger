<!DOCTYPE html>
<html>
<head>
  <title>Location Logger</title>
  <!-- Firebase v9 -->
  <script type="module">
    // Import only what you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js";

    // ‚úÖ Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyDFKnHjmhU4n4oAslqr43NhKV3EayjJiOk",
      authDomain: "log-ip.firebaseapp.com",
      projectId: "log-ip",
      storageBucket: "log-ip.firebasestorage.app",
      messagingSenderId: "445351175174",
      appId: "1:445351175174:web:506dca3cc9ab1195418f87",
      measurementId: "G-Y51E6L1QY5"
    };

    // ‚úÖ Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const analytics = getAnalytics(app);

    // ‚úÖ Function to log location
    async function logLocation(lat, lng) {
      try {
        await addDoc(collection(db, "locations"), {
          latitude: lat,
          longitude: lng,
          timestamp: new Date().toISOString(),
          userAgent: navigator.userAgent
        });
        console.log("üìç Location logged!");
      } catch (error) {
        console.error("Error writing document: ", error);
      }
    }

    // ‚úÖ Ask for GPS
    if ("geolocation" in navigator) {
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lng = pos.coords.longitude;
          console.log("Got location:", lat, lng);
          logLocation(lat, lng);
        },
        (err) => {
          console.error("‚ùå Error getting location:", err);
        }
      );
    } else {
      console.log("‚ö†Ô∏è Geolocation not supported.");
    }
  </script>
</head>
<body>
  <h2>Location Logger</h2>
  <p>If allowed, your location will be logged to Firebase.</p>
</body>
</html>
